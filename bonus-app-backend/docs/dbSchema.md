# Схема базы данных проекта Play2Top

В этом документе описаны основные коллекции и поля, используемые в базе данных MongoDB для проекта Play2Top.

> **Примечание:** Названия коллекций и полей могут немного отличаться в зависимости от выбранной реализации (например, использование Mongoose или нативного драйвера MongoDB). Ниже приведён один из вариантов структуры.

---

## 1. Коллекция `users`

Хранит данные пользователей, как музыкантов, так и слушателей.

### Пример документа:
```json
{
  "_id": ObjectId("..."),     // _id: Уникальный идентификатор (создаётся автоматически).
  "id": 1,                    // id: Последовательный числовой идентификатор (например, countDocuments() + 1).
  "username": "test_user",    // username: Уникальное имя пользователя (email или логин).
  "password": "hashed_password",  // password: Пароль (хэшированное значение).
  "bonusRoubles": 0,          // bonusRoubles: Баланс в рублях (начальное значение 0).
  "bonusInternal": 0,         // bonusInternal: Внутренняя валюта (P2T) (начальное значение 0).
  "refCode": "ABC123",        // refCode: Реферальный код пользователя.
  "role": "musician",         // role: Роль пользователя ("musician" или "listener").
  "createdAt": ISODate("2025-03-02T12:00:00Z"),  // createdAt: Дата и время создания документа.
  "updatedAt": ISODate("2025-03-02T12:00:00Z")   // updatedAt: Дата и время последнего обновления.
} 

Коллекция tracks:
{
  "_id": ObjectId("6123456789abcdef01234568"),         // _id: Уникальный идентификатор трека.
  "title": "Test Track",                                // title: Название трека.
  "description": "Это тестовый трек",                   // description: Описание трека.
  "filePath": "/uploads/1612345678901-Test_Track.mp3",   // filePath: Путь к файлу (если трек загружен).
  "link": "",                                          // link: Внешняя ссылка на трек (если добавлен по URL).
  "likes": 5,                                          // likes: Количество лайков.
  "listens": 10,                                       // listens: Количество прослушиваний.
  "createdAt": ISODate("2025-03-02T12:00:00Z"),         // createdAt: Дата и время загрузки.
  "updatedAt": ISODate("2025-03-02T12:00:00Z"),         // updatedAt: Дата и время последнего обновления.
  "userId": 1                                          // userId: Идентификатор пользователя (музыканта), загрузившего трек.
}
Коллекция posts:

{
  "_id": ObjectId("6123456789abcdef01234569"),         // _id: Уникальный идентификатор поста.
  "userId": 1,                                         // userId: Идентификатор пользователя, создавшего пост.
  "trackId": 1,                                        // trackId: Идентификатор трека, к которому относится пост.
  "title": "Промо трека",                              // title: Заголовок поста.
  "description": "Послушайте мой новый трек!",         // description: Описание поста.
  "likes": 2,                                          // likes: Количество лайков.
  "comments": [],                                      // comments: Массив комментариев.
  "createdAt": ISODate("2025-03-02T12:30:00Z"),         // createdAt: Дата создания поста.
  "updatedAt": ISODate("2025-03-02T12:30:00Z")          // updatedAt: Дата последнего обновления поста.
}
Коллекция tasks:

{
  "_id": ObjectId("6123456789abcdef01234570"),         // _id: Уникальный идентификатор задания.
  "title": "Прослушать трек",                          // title: Название задания.
  "description": "Прослушайте трек полностью без перемотки.",  // description: Описание задания.
  "trackLink": "https://music.yandex.ru/album/123456",   // trackLink: Ссылка на трек, связанный с заданием.
  "reward": {                                          // reward: Объект с наградой.
    "bonusRoubles": 5,                                 // bonusRoubles: Бонус в рублях.
    "bonusInternal": 10                                // bonusInternal: Бонус во внутренней валюте (P2T).
  },
  "createdAt": ISODate("2025-03-02T13:00:00Z"),         // createdAt: Дата создания задания.
  "updatedAt": ISODate("2025-03-02T13:00:00Z")          // updatedAt: Дата последнего обновления задания.
}